<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>Punkte mit D3.js – Dreieck zeichnen (Snap), Zoom/Pan & JSON-Import/Export (mit Namensreferenz)</title>
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
  :root { --pad: 10px; }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial; margin: 0; }
  header { padding: var(--pad); border-bottom: 1px solid #e5e7eb; }
  .controls { display: flex; flex-wrap: wrap; gap: 12px; padding: var(--pad); align-items: center; }
  .controls label { white-space: nowrap; }
  .controls input[type="range"] { vertical-align: middle; }
  #chart { padding: var(--pad); }
  button { padding: 8px 12px; border-radius: 8px; border: 1px solid #cbd5e1; background: #fff; cursor: pointer; }
  button:hover { background: #f8fafc; }
  button.active { background: #e0f2fe; border-color: #38bdf8; }
  .hint { font-size: 12px; color: #475569; }
  .axis path, .axis line { stroke: #94a3b8; }
  .tri { stroke: rgba(79,70,229,0.9); stroke-width: 2px; }
  .temp-edge { stroke: #0ea5e9; stroke-dasharray: 4 4; stroke-width: 2px; fill: none; }
  .snap-marker { fill: none; stroke: #0ea5e9; stroke-width: 2px; pointer-events: none; }
  .picked { fill: #f59e0b !important; stroke: #b45309; }
  .hidden { display:none; }
</style>
</head>
<body>
<header>
  <h2 style="margin:0">Punkte mit D3.js – Dreieck-Zeichnen (Snap), Zoom/Pan & JSON-Import/Export</h2>
  <div class="hint">Dreiecke speichern jetzt <strong>Namen</strong> statt Indizes, damit die Referenzen stabil bleiben, auch wenn sich die Punktliste ändert.</div>
</header>

<div class="controls">
  <label>Punktgröße: <input id="radiusSlider" type="range" min="1" max="20" step="1" value="4"></label>
  <span id="radiusVal">4</span>
  <label>Farbskalierung: <input id="colorSlider" type="range" min="0.1" max="5" step="0.1" value="1"></label>
  <span id="colorVal">1</span>
  <button id="btnNew">Neues Dreieck</button>
  <button id="btnCancel">Abbrechen</button>
  <button id="btnSave">Save Dreiecke</button>
  <button id=\"btnExportSTL\">Export STL</button>
  <button id="btnImport">Import JSON</button>
  <input id="fileInput" type="file" accept="application/json" class="hidden"/>
  <span class="hint" id="status">Bereit.</span>
</div>

<div id="chart"></div>

<script>
let points = [
  {
    "x": 6734.994035722883,
    "y": -16506.79077569072,
    "z": 436.1770029561594,
    "name": "Point448"
  },
  {
    "x": 6731.831993054929,
    "y": -16511.07916029222,
    "z": 435.505340596661,
    "name": "Point450"
  },
  {
    "x": 6726.753221844726,
    "y": -16566.4209251471,
    "z": 433.1322146961465,
    "name": "Point452"
  },
  {
    "x": 6723.912712798592,
    "y": -16569.96120058815,
    "z": 432.9579745922238,
    "name": "Point454"
  },
  {
    "x": 6729.828456467087,
    "y": -16574.74291639431,
    "z": 431.5978831462562,
    "name": "Point456"
  },
  {
    "x": 6732.671265652612,
    "y": -16571.23699036734,
    "z": 431.9114532424137,
    "name": "Point458"
  },
  {
    "x": 6733.821194633379,
    "y": -16557.7216075885,
    "z": 432.9660113705322,
    "name": "Point460"
  },
  {
    "x": 6749.976795046648,
    "y": -16544.00789493798,
    "z": 435.0,
    "name": "Point004"
  },
  {
    "x": 6742.322208886749,
    "y": -16553.30787702577,
    "z": 434.456,
    "name": "Point005"
  },
  {
    "x": 6732.923842599278,
    "y": -16530.05694444626,
    "z": 434.926,
    "name": "Point007"
  },
  {
    "x": 6730.225715289418,
    "y": -16527.71026056313,
    "z": 435.2946888785809,
    "name": "Point008"
  },
  {
    "x": 6735.115816283183,
    "y": -16527.45762055761,
    "z": 435.3361213169992,
    "name": "Point009"
  },
  {
    "x": 6722.753579320519,
    "y": -16537.18219858162,
    "z": 435.000475927256,
    "name": "Point010"
  },
  {
    "x": 6723.228311620152,
    "y": -16542.00213532898,
    "z": 434.7630513440818,
    "name": "Point011"
  },
  {
    "x": 6740.259579296988,
    "y": -16555.72762019472,
    "z": 434.1721243849024,
    "name": "Point012"
  },
  {
    "x": 6744.843699168136,
    "y": -16555.39509777005,
    "z": 434.3992506274953,
    "name": "Point013"
  },
  {
    "x": 6736.153768586385,
    "y": -16514.27785035186,
    "z": 436.0041580665857,
    "name": "Point014"
  },
  {
    "x": 6731.831993055175,
    "y": -16511.07916029186,
    "z": 435.6222433261573,
    "name": "Point015"
  },
  {
    "x": 6734.134017133931,
    "y": -16506.1883904101,
    "z": 435.9621080290526,
    "name": "Point017"
  },
  {
    "x": 6739.27407226232,
    "y": -16509.95603065893,
    "z": 436.4094401458278,
    "name": "Point018"
  },
  {
    "x": 6730.108561303415,
    "y": -16509.81054569437,
    "z": 435.505340596661,
    "name": "Point019"
  },
  {
    "x": 6730.563299730089,
    "y": -16512.87649644485,
    "z": 435.5962489712983,
    "name": "Point020"
  },
  {
    "x": 6725.918576449535,
    "y": -16565.81737973548,
    "z": 433.1175932073966,
    "name": "Point022"
  },
  {
    "x": 6723.110345429156,
    "y": -16570.93269768228,
    "z": 432.8012512112036,
    "name": "Point024"
  },
  {
    "x": 6729.330396924506,
    "y": -16576.49344108481,
    "z": 431.5978831462562,
    "name": "Point025"
  },
  {
    "x": 6731.832558270451,
    "y": -16574.99585108996,
    "z": 431.6670920401812,
    "name": "Point026"
  },
  {
    "x": 6733.594617215524,
    "y": -16572.39363287532,
    "z": 431.9114532424137,
    "name": "Point027"
  },
  {
    "x": 6734.171810771117,
    "y": -16570.55079480749,
    "z": 432.0414633816108,
    "name": "Point028"
  },
  {
    "x": 6759.020571142777,
    "y": -16553.5058250039,
    "z": 434.057914564386,
    "name": "Point029"
  },
  {
    "x": 6759.497640346301,
    "y": -16553.89483584389,
    "z": 434.1292603444308,
    "name": "Point030"
  },
  {
    "x": 6759.568609290496,
    "y": -16553.8033712975,
    "z": 434.161967208609,
    "name": "Point031"
  },
  {
    "x": 6763.182810208674,
    "y": -16556.72794736664,
    "z": 433.8828421970829,
    "name": "Point032"
  },
  {
    "x": 6764.163924401013,
    "y": -16555.49883652629,
    "z": 433.9298205245286,
    "name": "Point033"
  },
  {
    "x": 6760.466821398587,
    "y": -16552.51352482272,
    "z": 434.1741823563352,
    "name": "Point034"
  },
  {
    "x": 6760.143256276095,
    "y": -16552.97816934137,
    "z": 433.8828421970829,
    "name": "Point035"
  },
  {
    "x": 6759.713747693491,
    "y": -16552.62794036943,
    "z": 434.1306235529482,
    "name": "Point036"
  },
  {
    "x": 6735.123537885474,
    "y": -16467.08602760732,
    "z": 439.1821063896641,
    "name": "Point037"
  },
  {
    "x": 6740.457846728412,
    "y": -16470.25658895046,
    "z": 439.1894886810333,
    "name": "Point038"
  },
  {
    "x": 6746.489014746082,
    "y": -16474.29779211425,
    "z": 439.342980264686,
    "name": "Point039"
  },
  {
    "x": 6753.259251474707,
    "y": -16479.70051380949,
    "z": 439.5471875602379,
    "name": "Point040"
  },
  {
    "x": 6759.821139336938,
    "y": -16485.2872148281,
    "z": 439.8409335659817,
    "name": "Point041"
  },
  {
    "x": 6763.200958227769,
    "y": -16488.25317148334,
    "z": 440.0197611236945,
    "name": "Point042"
  },
  {
    "x": 6769.43950690626,
    "y": -16493.12291918875,
    "z": 440.3586576217785,
    "name": "Point043"
  },
  {
    "x": 6775.785160843805,
    "y": -16497.57802824598,
    "z": 440.3856065077707,
    "name": "Point044"
  },
  {
    "x": 6785.133254239116,
    "y": -16503.20484663908,
    "z": 440.3768850695342,
    "name": "Point045"
  },
  {
    "x": 6796.722800696155,
    "y": -16509.59673926111,
    "z": 440.3018808122724,
    "name": "Point046"
  },
  {
    "x": 6799.275874645466,
    "y": -16504.88580554022,
    "z": 440.3408886119723,
    "name": "Point047"
  },
  {
    "x": 6791.131342908443,
    "y": -16500.39502014516,
    "z": 440.3457058547065,
    "name": "Point048"
  },
  {
    "x": 6782.519839707742,
    "y": -16495.12808376219,
    "z": 440.2228113487363,
    "name": "Point049"
  },
  {
    "x": 6771.006624985354,
    "y": -16487.17649172298,
    "z": 440.0296087265015,
    "name": "Point050"
  },
  {
    "x": 6759.938152935179,
    "y": -16478.42041127502,
    "z": 439.8218401493505,
    "name": "Point051"
  },
  {
    "x": 6751.86736431604,
    "y": -16471.76327788553,
    "z": 439.7099366961047,
    "name": "Point052"
  },
  {
    "x": 6741.120145164106,
    "y": -16464.41382220592,
    "z": 439.6585831977427,
    "name": "Point053"
  },
  {
    "x": 6736.396407272176,
    "y": -16461.70331549592,
    "z": 439.6438033757731,
    "name": "Point054"
  },
  {
    "x": 6732.854944219995,
    "y": -16467.89947402042,
    "z": 438.7761872392148,
    "name": "Point055"
  },
  {
    "x": 6740.820243395128,
    "y": -16473.63683983162,
    "z": 438.6027111904696,
    "name": "Point056"
  },
  {
    "x": 6750.952268344617,
    "y": -16481.34231002186,
    "z": 438.9230381641537,
    "name": "Point057"
  },
  {
    "x": 6755.413356749923,
    "y": -16484.50392816471,
    "z": 439.3746111057699,
    "name": "Point058"
  },
  {
    "x": 6758.60867455534,
    "y": -16488.43733725576,
    "z": 439.2586131235585,
    "name": "Point059"
  },
  {
    "x": 6761.476373980897,
    "y": -16491.27158032658,
    "z": 439.9024884682149,
    "name": "Point060"
  },
  {
    "x": 6759.114238445116,
    "y": -16494.54453357589,
    "z": 438.1093924716115,
    "name": "Point061"
  },
  {
    "x": 6757.044003820953,
    "y": -16489.94698845888,
    "z": 438.0598878189921,
    "name": "Point062"
  },
  {
    "x": 6751.033124431995,
    "y": -16483.91702046947,
    "z": 437.7516888650134,
    "name": "Point063"
  },
  {
    "x": 6742.448475095364,
    "y": -16477.14087746933,
    "z": 437.2841079784557,
    "name": "Point064"
  },
  {
    "x": 6734.238161289256,
    "y": -16472.57141752876,
    "z": 436.8493242068216,
    "name": "Point065"
  },
  {
    "x": 6796.078637488712,
    "y": -16510.87323518799,
    "z": 439.9605652792379,
    "name": "Point066"
  },
  {
    "x": 6789.556596672237,
    "y": -16507.98936987072,
    "z": 439.92733837571,
    "name": "Point067"
  },
  {
    "x": 6781.966254749757,
    "y": -16504.06633146212,
    "z": 440.0218640435487,
    "name": "Point068"
  },
  {
    "x": 6780.240447843633,
    "y": -16505.85592018563,
    "z": 439.2723982352763,
    "name": "Point069"
  },
  {
    "x": 6788.629841116052,
    "y": -16510.17345044219,
    "z": 438.8511712448671,
    "name": "Point070"
  },
  {
    "x": 6798.136444164355,
    "y": -16514.05355095266,
    "z": 438.9066024068743,
    "name": "Point071"
  },
  {
    "x": 6771.55395836033,
    "y": -16513.64458690572,
    "z": 437.9790079155937,
    "name": "Point072"
  },
  {
    "x": 6769.141230173514,
    "y": -16514.32881327513,
    "z": 437.7763038398698,
    "name": "Point073"
  },
  {
    "x": 6771.131195251595,
    "y": -16523.1899759697,
    "z": 436.8620175030082,
    "name": "Point074"
  },
  {
    "x": 6771.286869833684,
    "y": -16523.85295476432,
    "z": 436.7126861652359,
    "name": "Point075"
  },
  {
    "x": 6773.876146615617,
    "y": -16523.15123481843,
    "z": 436.9467270420864,
    "name": "Point076"
  },
  {
    "x": 6775.543318095903,
    "y": -16533.55761374238,
    "z": 435.8521292461082,
    "name": "Point077"
  },
  {
    "x": 6773.229030203768,
    "y": -16533.86992801583,
    "z": 435.7424418535084,
    "name": "Point078"
  },
  {
    "x": 6775.034966022403,
    "y": -16542.67237895596,
    "z": 434.8234550449997,
    "name": "Point079"
  },
  {
    "x": 6777.26842834574,
    "y": -16542.21399994786,
    "z": 434.9180953726172,
    "name": "Point080"
  },
  {
    "x": 6780.080323273238,
    "y": -16551.22768708608,
    "z": 433.8647653758526,
    "name": "Point081"
  },
  {
    "x": 6777.983410812294,
    "y": -16552.22331448595,
    "z": 433.6954683214426,
    "name": "Point082"
  },
  {
    "x": 6774.084375341356,
    "y": -16557.78042413791,
    "z": 432.886586050503,
    "name": "Point083"
  },
  {
    "x": 6768.918662333153,
    "y": -16557.14634559948,
    "z": 433.1500983955339,
    "name": "Point084"
  },
  {
    "x": 6766.039297896511,
    "y": -16558.19864744881,
    "z": 433.1383034363389,
    "name": "Point085"
  },
  {
    "x": 6764.656205039328,
    "y": -16556.19139730231,
    "z": 433.7715827962384,
    "name": "Point086"
  },
  {
    "x": 6761.254748386564,
    "y": -16558.43529596493,
    "z": 433.500602141954,
    "name": "Point087"
  },
  {
    "x": 6758.702241594941,
    "y": -16560.63248334663,
    "z": 433.0432174000889,
    "name": "Point088"
  },
  {
    "x": 6762.36065876577,
    "y": -16563.61298672623,
    "z": 432.1578449020162,
    "name": "Point089"
  },
  {
    "x": 6760.854643877533,
    "y": -16565.28537079926,
    "z": 432.0046797394753,
    "name": "Point090"
  },
  {
    "x": 6753.979817504676,
    "y": -16573.12299822344,
    "z": 430.9869107259437,
    "name": "Point091"
  },
  {
    "x": 6750.621784050758,
    "y": -16568.36011963289,
    "z": 431.8406475130469,
    "name": "Point092"
  },
  {
    "x": 6746.571173140405,
    "y": -16572.74856856362,
    "z": 431.5225411038846,
    "name": "Point093"
  },
  {
    "x": 6742.860197449476,
    "y": -16576.74494887423,
    "z": 431.0434143282473,
    "name": "Point094"
  },
  {
    "x": 6737.182804702566,
    "y": -16582.89763169887,
    "z": 430.2149802120402,
    "name": "Point095"
  },
  {
    "x": 6726.526251512002,
    "y": -16588.55397586018,
    "z": 430.3406202821061,
    "name": "Point096"
  },
  {
    "x": 6718.442424356228,
    "y": -16592.66055601724,
    "z": 429.8934765271842,
    "name": "Point098"
  },
  {
    "x": 6706.199893613644,
    "y": -16595.62599856037,
    "z": 429.5917192501947,
    "name": "Point100"
  },
  {
    "x": 6696.540930483323,
    "y": -16598.81481134189,
    "z": 428.8981121545658,
    "name": "Point101"
  },
  {
    "x": 6693.003248768444,
    "y": -16597.79085828559,
    "z": 428.9204901503399,
    "name": "Point102"
  },
  {
    "x": 6695.65925455618,
    "y": -16594.70384084437,
    "z": 429.6092104287818,
    "name": "Point103"
  },
  {
    "x": 6696.641927763517,
    "y": -16589.93968644979,
    "z": 430.4573194375262,
    "name": "Point104"
  },
  {
    "x": 6692.006748420617,
    "y": -16587.57639762284,
    "z": 430.2818329175934,
    "name": "Point105"
  },
  {
    "x": 6691.049536133361,
    "y": -16582.88461004344,
    "z": 430.5305302636698,
    "name": "Point106"
  },
  {
    "x": 6690.56665956651,
    "y": -16576.76301740045,
    "z": 430.9106570901349,
    "name": "Point107"
  },
  {
    "x": 6693.596392900332,
    "y": -16571.10307883615,
    "z": 431.6914172926918,
    "name": "Point108"
  },
  {
    "x": 6697.002508455273,
    "y": -16565.20537975605,
    "z": 432.1761122746393,
    "name": "Point109"
  },
  {
    "x": 6698.705778008235,
    "y": -16563.40556373707,
    "z": 432.4405903285369,
    "name": "Point110"
  },
  {
    "x": 6701.242731416167,
    "y": -16557.16696454185,
    "z": 432.7637935904786,
    "name": "Point111"
  },
  {
    "x": 6705.08187769126,
    "y": -16550.62191560956,
    "z": 433.1769131375477,
    "name": "Point112"
  },
  {
    "x": 6704.494837855469,
    "y": -16548.79723884313,
    "z": 432.9750443957746,
    "name": "Point113"
  },
  {
    "x": 6704.919711588869,
    "y": -16546.85513387593,
    "z": 432.8446539370343,
    "name": "Point114"
  },
  {
    "x": 6703.816123003216,
    "y": -16545.60004893247,
    "z": 432.3021362684667,
    "name": "Point115"
  },
  {
    "x": 6702.307371409886,
    "y": -16547.15258617189,
    "z": 431.9121354008093,
    "name": "Point116"
  },
  {
    "x": 6700.888310762261,
    "y": -16544.08236054324,
    "z": 431.9362635668367,
    "name": "Point117"
  },
  {
    "x": 6700.069056500718,
    "y": -16540.22516651054,
    "z": 431.8603747542948,
    "name": "Point118"
  },
  {
    "x": 6701.136848343601,
    "y": -16534.93084007599,
    "z": 431.8668182212859,
    "name": "Point119"
  },
  {
    "x": 6702.811522100223,
    "y": -16529.86288466746,
    "z": 431.6812375290319,
    "name": "Point120"
  },
  {
    "x": 6708.423419189735,
    "y": -16524.12960947304,
    "z": 433.087572243996,
    "name": "Point121"
  },
  {
    "x": 6713.256139133264,
    "y": -16516.81329546612,
    "z": 433.8478203685954,
    "name": "Point122"
  },
  {
    "x": 6719.884240387178,
    "y": -16506.42453748573,
    "z": 434.3374033048749,
    "name": "Point123"
  },
  {
    "x": 6726.45169177062,
    "y": -16495.12252240931,
    "z": 435.2330700829625,
    "name": "Point124"
  },
  {
    "x": 6730.82395727802,
    "y": -16486.34636142286,
    "z": 435.7175697674975,
    "name": "Point125"
  },
  {
    "x": 6732.678091303125,
    "y": -16481.78189539072,
    "z": 436.1200191956013,
    "name": "Point126"
  },
  {
    "x": 6731.585887353753,
    "y": -16479.09806386883,
    "z": 436.1099164960906,
    "name": "Point127"
  },
  {
    "x": 6733.65005766877,
    "y": -16477.43830169496,
    "z": 436.5127829685807,
    "name": "Point128"
  },
  {
    "x": 6733.773001208408,
    "y": -16475.21444972132,
    "z": 436.6238774657249,
    "name": "Point129"
  },
  {
    "x": 6733.527363774299,
    "y": -16472.47943329835,
    "z": 436.3945756917819,
    "name": "Point130"
  },
  {
    "x": 6755.357488835589,
    "y": -16548.98824418267,
    "z": 434.6360846469179,
    "name": "Point131"
  },
  {
    "x": 6756.427608256634,
    "y": -16548.85080839973,
    "z": 434.4726306535304,
    "name": "Point132"
  },
  {
    "x": 6757.794949573485,
    "y": -16549.72534560275,
    "z": 434.4087944701314,
    "name": "Point133"
  },
  {
    "x": 6758.349072690334,
    "y": -16550.64569946009,
    "z": 434.2331514833495,
    "name": "Point134"
  },
  {
    "x": 6758.620997596403,
    "y": -16551.53162766088,
    "z": 434.1215850804001,
    "name": "Point135"
  },
  {
    "x": 6758.068603000483,
    "y": -16552.24700985645,
    "z": 434.1679006228223,
    "name": "Point136"
  },
  {
    "x": 6756.863270883109,
    "y": -16552.26852368231,
    "z": 434.1986825270578,
    "name": "Point137"
  },
  {
    "x": 6755.363444442864,
    "y": -16551.46629240321,
    "z": 434.2712821662426,
    "name": "Point138"
  },
  {
    "x": 6754.465885764164,
    "y": -16550.86166324976,
    "z": 434.422489952296,
    "name": "Point139"
  },
  {
    "x": 6754.357033322525,
    "y": -16549.82301745813,
    "z": 434.6518964590505,
    "name": "Point140"
  },
  {
    "x": 6755.053828725291,
    "y": -16550.22278107083,
    "z": 434.2292283978313,
    "name": "Point141"
  },
  {
    "x": 6756.126830089161,
    "y": -16549.56890272477,
    "z": 434.1645162915811,
    "name": "Point142"
  },
  {
    "x": 6757.393594779602,
    "y": -16550.70790894911,
    "z": 434.0550067136064,
    "name": "Point143"
  },
  {
    "x": 6757.966700025195,
    "y": -16551.40588234655,
    "z": 434.0086612887681,
    "name": "Point144"
  },
  {
    "x": 6758.061903011845,
    "y": -16551.80434045135,
    "z": 434.0254583926871,
    "name": "Point145"
  },
  {
    "x": 6756.201945214243,
    "y": -16551.57898049872,
    "z": 434.056828148663,
    "name": "Point146"
  },
  {
    "x": 6755.363322369929,
    "y": -16550.8418219321,
    "z": 434.0914867594838,
    "name": "Point147"
  },
  {
    "x": 6755.726000486583,
    "y": -16550.96440045045,
    "z": 433.9872838072479,
    "name": "Point148"
  },
  {
    "x": 6755.603364961895,
    "y": -16550.8395036457,
    "z": 434.0171243418008,
    "name": "Point149"
  },
  {
    "x": 6755.681914323012,
    "y": -16550.75222260928,
    "z": 434.0009640762582,
    "name": "Point150"
  },
  {
    "x": 6755.842943786982,
    "y": -16550.85649135545,
    "z": 433.9930417994037,
    "name": "Point151"
  },
  {
    "x": 6751.605981168646,
    "y": -16547.58630521243,
    "z": 434.8181490385905,
    "name": "Point152"
  },
  {
    "x": 6752.173671998079,
    "y": -16546.79351089057,
    "z": 434.9149048198014,
    "name": "Point153"
  },
  {
    "x": 6750.078519044979,
    "y": -16546.40989329007,
    "z": 434.9031828846782,
    "name": "Point154"
  },
  {
    "x": 6750.668205827752,
    "y": -16545.629105544,
    "z": 434.8098307466134,
    "name": "Point155"
  },
  {
    "x": 6744.247754616463,
    "y": -16556.69624251859,
    "z": 434.0993290683255,
    "name": "Point156"
  },
  {
    "x": 6743.90474709484,
    "y": -16556.87441739796,
    "z": 434.2442608727142,
    "name": "Point157"
  },
  {
    "x": 6741.471753795693,
    "y": -16558.58355177214,
    "z": 434.2431220412254,
    "name": "Point158"
  },
  {
    "x": 6739.203359464985,
    "y": -16556.14473870137,
    "z": 434.1460406845436,
    "name": "Point159"
  },
  {
    "x": 6737.63192921395,
    "y": -16554.9101658124,
    "z": 434.4993633618578,
    "name": "Point160"
  },
  {
    "x": 6731.111673637944,
    "y": -16549.86778186886,
    "z": 434.8522341614589,
    "name": "Point161"
  },
  {
    "x": 6723.283680529668,
    "y": -16543.22398570195,
    "z": 434.868275417015,
    "name": "Point162"
  },
  {
    "x": 6723.720789857071,
    "y": -16542.5398207408,
    "z": 434.7525243135169,
    "name": "Point163"
  },
  {
    "x": 6722.988667845113,
    "y": -16543.18191377273,
    "z": 434.6694783428684,
    "name": "Point164"
  },
  {
    "x": 6723.044098194125,
    "y": -16544.02018055119,
    "z": 434.5739160096273,
    "name": "Point165"
  },
  {
    "x": 6727.630525889175,
    "y": -16548.25476389794,
    "z": 434.4122620802373,
    "name": "Point166"
  },
  {
    "x": 6730.852508041956,
    "y": -16551.1978875684,
    "z": 434.1718618804589,
    "name": "Point167"
  },
  {
    "x": 6739.193956898965,
    "y": -16557.51294471642,
    "z": 433.7999430354685,
    "name": "Point168"
  },
  {
    "x": 6740.842088821786,
    "y": -16558.93429938554,
    "z": 433.7043104209006,
    "name": "Point169"
  },
  {
    "x": 6741.539835699045,
    "y": -16559.33947270751,
    "z": 433.6936752367765,
    "name": "Point170"
  },
  {
    "x": 6742.913547836812,
    "y": -16558.84049593035,
    "z": 433.733254276216,
    "name": "Point171"
  },
  {
    "x": 6722.821766292248,
    "y": -16541.5403552988,
    "z": 434.9248000541702,
    "name": "Point172"
  },
  {
    "x": 6722.333323829873,
    "y": -16539.81704778265,
    "z": 434.8221900528297,
    "name": "Point173"
  },
  {
    "x": 6720.281127424169,
    "y": -16539.58427831649,
    "z": 434.6260829977691,
    "name": "Point174"
  },
  {
    "x": 6718.842510340777,
    "y": -16540.01688126228,
    "z": 434.3837884943932,
    "name": "Point175"
  },
  {
    "x": 6719.265085390012,
    "y": -16541.21773327175,
    "z": 434.4034424489364,
    "name": "Point176"
  },
  {
    "x": 6720.552860860409,
    "y": -16541.86196522991,
    "z": 434.5632533524185,
    "name": "Point177"
  },
  {
    "x": 6721.675947495039,
    "y": -16542.78894608206,
    "z": 434.5219289697707,
    "name": "Point178"
  },
  {
    "x": 6722.435287244522,
    "y": -16542.4526755777,
    "z": 434.6320515181869,
    "name": "Point179"
  },
  {
    "x": 6721.932888247973,
    "y": -16542.35161793798,
    "z": 434.8638378148898,
    "name": "Point180"
  },
  {
    "x": 6720.749624816372,
    "y": -16541.25808888993,
    "z": 434.8621328342706,
    "name": "Point181"
  },
  {
    "x": 6719.585898210853,
    "y": -16540.27450819618,
    "z": 434.8952810345218,
    "name": "Point182"
  },
  {
    "x": 6720.52887901343,
    "y": -16540.03292931497,
    "z": 434.920936036855,
    "name": "Point183"
  },
  {
    "x": 6721.990181677039,
    "y": -16540.31858542958,
    "z": 435.0675625167787,
    "name": "Point184"
  },
  {
    "x": 6722.438720313326,
    "y": -16541.04162738686,
    "z": 435.1011313395575,
    "name": "Point185"
  },
  {
    "x": 6722.08584274647,
    "y": -16541.94407158414,
    "z": 434.9876044541597,
    "name": "Point186"
  },
  {
    "x": 6738.615283625597,
    "y": -16563.59453046815,
    "z": 433.1061606165022,
    "name": "Point187"
  },
  {
    "x": 6737.451040400833,
    "y": -16564.41878605589,
    "z": 433.1913909344003,
    "name": "Point188"
  },
  {
    "x": 6736.198484897084,
    "y": -16565.89211838475,
    "z": 433.0399092324078,
    "name": "Point189"
  },
  {
    "x": 6735.721468838703,
    "y": -16567.01880966844,
    "z": 433.074201669544,
    "name": "Point190"
  },
  {
    "x": 6733.593234088149,
    "y": -16568.82728010685,
    "z": 433.0334806144238,
    "name": "Point191"
  },
  {
    "x": 6732.478961104403,
    "y": -16570.02866294194,
    "z": 432.9093334637582,
    "name": "Point192"
  },
  {
    "x": 6732.216321746881,
    "y": -16570.86366219473,
    "z": 433.0295293591917,
    "name": "Point193"
  },
  {
    "x": 6742.207495247521,
    "y": -16562.95409123333,
    "z": 433.1807733606547,
    "name": "Point194"
  },
  {
    "x": 6738.272196541984,
    "y": -16565.25454828801,
    "z": 432.7215932598338,
    "name": "Point195"
  },
  {
    "x": 6735.253578526339,
    "y": -16568.59669352267,
    "z": 432.2122840024531,
    "name": "Point196"
  },
  {
    "x": 6733.159988180834,
    "y": -16571.13912925785,
    "z": 432.0634352872148,
    "name": "Point197"
  },
  {
    "x": 6729.882144120116,
    "y": -16575.89065216227,
    "z": 431.5627598203719,
    "name": "Point198"
  },
  {
    "x": 6726.953194318672,
    "y": -16578.54090337969,
    "z": 431.3469581874087,
    "name": "Point199"
  },
  {
    "x": 6724.485940612366,
    "y": -16580.61868246888,
    "z": 431.2508276840672,
    "name": "Point200"
  },
  {
    "x": 6720.702190221708,
    "y": -16582.00722575964,
    "z": 431.3362626405433,
    "name": "Point201"
  },
  {
    "x": 6717.367426132163,
    "y": -16581.91641677351,
    "z": 431.421599057503,
    "name": "Point202"
  },
  {
    "x": 6720.814016516098,
    "y": -16579.91834850673,
    "z": 431.9992500413209,
    "name": "Point203"
  },
  {
    "x": 6723.868922671805,
    "y": -16577.79790223482,
    "z": 432.462008154951,
    "name": "Point204"
  },
  {
    "x": 6726.814907789061,
    "y": -16575.67036195579,
    "z": 432.6417823955417,
    "name": "Point205"
  },
  {
    "x": 6728.890388830334,
    "y": -16574.44722705489,
    "z": 432.512396085076,
    "name": "Point206"
  },
  {
    "x": 6759.510667701678,
    "y": -16559.54623512243,
    "z": 433.3355176132172,
    "name": "Point207"
  },
  {
    "x": 6757.275655332161,
    "y": -16561.72011394673,
    "z": 433.0004735635594,
    "name": "Point208"
  },
  {
    "x": 6753.852955677893,
    "y": -16563.80479402215,
    "z": 432.9460863275453,
    "name": "Point209"
  },
  {
    "x": 6750.998433489796,
    "y": -16565.1061492045,
    "z": 432.8529814500362,
    "name": "Point210"
  },
  {
    "x": 6748.033193752522,
    "y": -16566.27512895434,
    "z": 432.6035786671564,
    "name": "Point211"
  },
  {
    "x": 6746.230261883107,
    "y": -16567.55156936364,
    "z": 432.3419315833598,
    "name": "Point212"
  },
  {
    "x": 6745.069313014693,
    "y": -16569.00777434583,
    "z": 432.0852206693962,
    "name": "Point213"
  },
  {
    "x": 6747.8829622537,
    "y": -16567.75942514913,
    "z": 432.1619283547625,
    "name": "Point214"
  },
  {
    "x": 6749.930128616843,
    "y": -16567.68211561022,
    "z": 432.135072901845,
    "name": "Point215"
  },
  {
    "x": 6752.627532692847,
    "y": -16566.88685667743,
    "z": 432.007722184062,
    "name": "Point216"
  },
  {
    "x": 6755.680795807571,
    "y": -16565.34338934932,
    "z": 432.2561045419425,
    "name": "Point217"
  },
  {
    "x": 6757.787875677089,
    "y": -16563.92322002815,
    "z": 432.4452972654253,
    "name": "Point218"
  },
  {
    "x": 6760.355396629082,
    "y": -16562.60655541861,
    "z": 432.5568911768496,
    "name": "Point219"
  },
  {
    "x": 6750.017040432694,
    "y": -16562.95099438242,
    "z": 433.2327940044925,
    "name": "Point220"
  },
  {
    "x": 6750.633128197,
    "y": -16562.8178654809,
    "z": 433.2412829529494,
    "name": "Point221"
  },
  {
    "x": 6751.109601975825,
    "y": -16561.62648659937,
    "z": 433.3740888731554,
    "name": "Point222"
  },
  {
    "x": 6750.543697031712,
    "y": -16560.86561841016,
    "z": 433.4584921775386,
    "name": "Point223"
  },
  {
    "x": 6749.750610202588,
    "y": -16560.86253836703,
    "z": 433.3351174676791,
    "name": "Point224"
  },
  {
    "x": 6749.521664035812,
    "y": -16561.92059562397,
    "z": 433.2528814598918,
    "name": "Point225"
  },
  {
    "x": 6749.567941003837,
    "y": -16562.75143489208,
    "z": 433.1963863121346,
    "name": "Point226"
  },
  {
    "x": 6749.999050059761,
    "y": -16562.48889436873,
    "z": 432.8221105178818,
    "name": "Point227"
  },
  {
    "x": 6750.275711432603,
    "y": -16562.56497626937,
    "z": 432.8265547761694,
    "name": "Point228"
  },
  {
    "x": 6750.3783229785,
    "y": -16561.9791013699,
    "z": 432.8945813374594,
    "name": "Point229"
  },
  {
    "x": 6750.094491240212,
    "y": -16561.78986750045,
    "z": 432.9357252055779,
    "name": "Point230"
  },
  {
    "x": 6749.805780558578,
    "y": -16562.14191678005,
    "z": 432.9005329264328,
    "name": "Point231"
  },
  {
    "x": 6700.09948824958,
    "y": -16590.36804694467,
    "z": 430.3863172307611,
    "name": "Point232"
  },
  {
    "x": 6697.040993792243,
    "y": -16583.23276253998,
    "z": 431.0731739578769,
    "name": "Point233"
  },
  {
    "x": 6694.561728930988,
    "y": -16575.47204221347,
    "z": 431.6033539427444,
    "name": "Point234"
  },
  {
    "x": 6692.777845104385,
    "y": -16578.98569634071,
    "z": 431.12161406409,
    "name": "Point235"
  },
  {
    "x": 6697.448398529849,
    "y": -16569.5488251357,
    "z": 432.1570788789541,
    "name": "Point236"
  },
  {
    "x": 6701.173465495439,
    "y": -16576.11059508022,
    "z": 431.8553477441892,
    "name": "Point237"
  },
  {
    "x": 6705.067660927692,
    "y": -16582.7207657773,
    "z": 431.4088554326445,
    "name": "Point238"
  },
  {
    "x": 6708.360284492554,
    "y": -16589.01173210022,
    "z": 430.7568773394451,
    "name": "Point239"
  },
  {
    "x": 6718.472503659195,
    "y": -16586.83274962007,
    "z": 430.9298564270139,
    "name": "Point240"
  },
  {
    "x": 6715.098944341189,
    "y": -16582.13634068741,
    "z": 431.5153939314187,
    "name": "Point241"
  },
  {
    "x": 6710.687446072146,
    "y": -16574.73237122127,
    "z": 432.3139525726438,
    "name": "Point242"
  },
  {
    "x": 6706.331726482758,
    "y": -16567.39634480784,
    "z": 432.8121283240616,
    "name": "Point243"
  },
  {
    "x": 6702.136352981818,
    "y": -16561.47253994898,
    "z": 432.7999964160845,
    "name": "Point244"
  },
  {
    "x": 6707.354188460124,
    "y": -16553.84709518493,
    "z": 433.3327776128426,
    "name": "Point245"
  },
  {
    "x": 6711.547184937748,
    "y": -16560.37096002429,
    "z": 433.2246039574966,
    "name": "Point246"
  },
  {
    "x": 6716.313759036575,
    "y": -16567.84148656896,
    "z": 433.0531095890328,
    "name": "Point247"
  },
  {
    "x": 6720.156769594371,
    "y": -16572.86848440069,
    "z": 432.7941189222038,
    "name": "Point248"
  },
  {
    "x": 6723.190830054427,
    "y": -16576.16996800893,
    "z": 432.4960203720257,
    "name": "Point249"
  },
  {
    "x": 6725.250995011176,
    "y": -16574.24721874121,
    "z": 432.6325530596077,
    "name": "Point250"
  },
  {
    "x": 6722.548927583417,
    "y": -16571.50969742334,
    "z": 432.7849703589454,
    "name": "Point251"
  },
  {
    "x": 6722.038903139379,
    "y": -16565.86883276587,
    "z": 433.1690564602613,
    "name": "Point252"
  },
  {
    "x": 6727.98909031522,
    "y": -16581.55832270506,
    "z": 431.141803599894,
    "name": "Point253"
  },
  {
    "x": 6731.791941209491,
    "y": -16578.26790818165,
    "z": 431.382541953586,
    "name": "Point254"
  },
  {
    "x": 6733.930027926178,
    "y": -16574.53686065763,
    "z": 431.6711371047422,
    "name": "Point255"
  },
  {
    "x": 6733.693619991806,
    "y": -16581.84083644758,
    "z": 430.8700858512893,
    "name": "Point256"
  },
  {
    "x": 6736.549819199372,
    "y": -16580.14896712605,
    "z": 430.921212551184,
    "name": "Point257"
  },
  {
    "x": 6739.136798477,
    "y": -16579.20759057415,
    "z": 430.9347200999036,
    "name": "Point258"
  },
  {
    "x": 6741.113944765262,
    "y": -16575.03692229448,
    "z": 431.5196295632049,
    "name": "Point259"
  },
  {
    "x": 6737.465260192101,
    "y": -16571.65341324437,
    "z": 431.9978244621307,
    "name": "Point260"
  },
  {
    "x": 6732.345859905405,
    "y": -16566.55891962004,
    "z": 433.0170375611633,
    "name": "Point261"
  },
  {
    "x": 6727.3879009189,
    "y": -16562.09478757513,
    "z": 433.1968023935333,
    "name": "Point262"
  },
  {
    "x": 6722.354411708886,
    "y": -16557.60410614309,
    "z": 433.3610721463338,
    "name": "Point263"
  },
  {
    "x": 6717.344390661112,
    "y": -16553.23972751479,
    "z": 433.5852237185463,
    "name": "Point264"
  },
  {
    "x": 6715.247997982444,
    "y": -16551.42227988566,
    "z": 433.6441732067615,
    "name": "Point265"
  },
  {
    "x": 6711.16931730881,
    "y": -16547.90522237908,
    "z": 433.7084142873064,
    "name": "Point266"
  },
  {
    "x": 6706.4350041946,
    "y": -16543.6537334086,
    "z": 433.076081299223,
    "name": "Point267"
  },
  {
    "x": 6702.364823782051,
    "y": -16540.58768634928,
    "z": 432.3263426925987,
    "name": "Point268"
  },
  {
    "x": 6699.682204909499,
    "y": -16530.98680761013,
    "z": 431.0857442226261,
    "name": "Point269"
  },
  {
    "x": 6712.981883429689,
    "y": -16519.53405677218,
    "z": 433.7285965476185,
    "name": "Point270"
  },
  {
    "x": 6703.750547452152,
    "y": -16534.83783040392,
    "z": 432.3357451027259,
    "name": "Point271"
  },
  {
    "x": 6708.313804406537,
    "y": -16538.90648769062,
    "z": 433.4180222935975,
    "name": "Point272"
  },
  {
    "x": 6713.201913062613,
    "y": -16543.36436483656,
    "z": 433.955479462631,
    "name": "Point273"
  },
  {
    "x": 6717.985511145518,
    "y": -16547.83711032595,
    "z": 434.0835650088266,
    "name": "Point274"
  },
  {
    "x": 6725.613734578688,
    "y": -16553.69238648603,
    "z": 433.8840391375124,
    "name": "Point275"
  },
  {
    "x": 6728.97513842463,
    "y": -16556.77792102442,
    "z": 433.6665773754939,
    "name": "Point276"
  },
  {
    "x": 6735.695121166115,
    "y": -16562.51905190055,
    "z": 433.3001802256331,
    "name": "Point277"
  },
  {
    "x": 6739.737363385004,
    "y": -16566.36937629482,
    "z": 432.6406384101138,
    "name": "Point278"
  },
  {
    "x": 6743.564101818906,
    "y": -16569.18359752102,
    "z": 432.1645713876933,
    "name": "Point279"
  },
  {
    "x": 6754.17866644379,
    "y": -16566.33564929548,
    "z": 432.0985286245123,
    "name": "Point280"
  },
  {
    "x": 6751.376535346178,
    "y": -16563.93883092607,
    "z": 433.1146828951314,
    "name": "Point281"
  },
  {
    "x": 6747.968430254963,
    "y": -16560.86370491903,
    "z": 433.4831319432706,
    "name": "Point282"
  },
  {
    "x": 6746.039386071317,
    "y": -16559.0340151172,
    "z": 433.7247651591897,
    "name": "Point283"
  },
  {
    "x": 6741.898383060419,
    "y": -16555.71507602947,
    "z": 434.2898240135983,
    "name": "Point284"
  },
  {
    "x": 6733.764019612995,
    "y": -16549.05777634713,
    "z": 434.810454939492,
    "name": "Point285"
  },
  {
    "x": 6728.875870373576,
    "y": -16545.04483622171,
    "z": 434.7166163409129,
    "name": "Point286"
  },
  {
    "x": 6718.997567204455,
    "y": -16536.72664320588,
    "z": 434.5163906170055,
    "name": "Point287"
  },
  {
    "x": 6714.296159087145,
    "y": -16531.62510874927,
    "z": 433.9228474302217,
    "name": "Point288"
  },
  {
    "x": 6710.535108843325,
    "y": -16528.10280179143,
    "z": 433.1546689709648,
    "name": "Point289"
  },
  {
    "x": 6713.225336926059,
    "y": -16524.76866735073,
    "z": 433.703193298541,
    "name": "Point290"
  },
  {
    "x": 6717.825502302585,
    "y": -16528.71149833971,
    "z": 434.3538329880685,
    "name": "Point291"
  },
  {
    "x": 6723.436466595669,
    "y": -16533.07301396322,
    "z": 434.9999298648909,
    "name": "Point292"
  },
  {
    "x": 6725.702921249957,
    "y": -16535.13333261292,
    "z": 435.0930255623534,
    "name": "Point293"
  },
  {
    "x": 6728.71542140195,
    "y": -16529.74957014324,
    "z": 435.2477890113369,
    "name": "Point294"
  },
  {
    "x": 6727.00277016685,
    "y": -16528.94597262499,
    "z": 435.20537659619,
    "name": "Point295"
  },
  {
    "x": 6720.931548903652,
    "y": -16524.65141847108,
    "z": 434.654644289054,
    "name": "Point296"
  },
  {
    "x": 6718.452739359297,
    "y": -16522.78133768388,
    "z": 434.3193455543369,
    "name": "Point297"
  },
  {
    "x": 6716.925255819624,
    "y": -16521.62165332837,
    "z": 433.9986035488546,
    "name": "Point298"
  },
  {
    "x": 6719.58345095613,
    "y": -16515.11772391903,
    "z": 434.3018622770905,
    "name": "Point299"
  },
  {
    "x": 6725.294590945782,
    "y": -16519.35754554915,
    "z": 435.0535982353613,
    "name": "Point300"
  },
  {
    "x": 6732.08107169515,
    "y": -16524.71325795425,
    "z": 435.4190020877868,
    "name": "Point301"
  },
  {
    "x": 6739.401737818656,
    "y": -16529.73114489532,
    "z": 435.4025488737971,
    "name": "Point302"
  },
  {
    "x": 6745.742972344344,
    "y": -16535.13421207659,
    "z": 435.297654889524,
    "name": "Point303"
  },
  {
    "x": 6751.402881227195,
    "y": -16540.27346247395,
    "z": 435.170622321777,
    "name": "Point304"
  },
  {
    "x": 6756.839627023175,
    "y": -16545.16206920151,
    "z": 434.7550625056028,
    "name": "Point305"
  },
  {
    "x": 6762.408328162621,
    "y": -16549.56358739674,
    "z": 434.1168751902878,
    "name": "Point306"
  },
  {
    "x": 6766.629620175585,
    "y": -16553.43690981238,
    "z": 433.6177646573633,
    "name": "Point307"
  },
  {
    "x": 6770.884429009677,
    "y": -16556.37932048747,
    "z": 433.1628440450877,
    "name": "Point308"
  },
  {
    "x": 6784.2040229183,
    "y": -16553.66594470884,
    "z": 433.7969317398965,
    "name": "Point309"
  },
  {
    "x": 6774.572524921255,
    "y": -16547.37126561953,
    "z": 434.2777294982225,
    "name": "Point310"
  },
  {
    "x": 6767.252736039933,
    "y": -16542.41400838449,
    "z": 434.8055238332599,
    "name": "Point311"
  },
  {
    "x": 6760.453546292189,
    "y": -16536.97317025085,
    "z": 435.4519160240889,
    "name": "Point312"
  },
  {
    "x": 6754.263687901576,
    "y": -16531.97770899116,
    "z": 435.6762440009043,
    "name": "Point313"
  },
  {
    "x": 6746.811261175295,
    "y": -16527.04835799022,
    "z": 435.7925521461293,
    "name": "Point314"
  },
  {
    "x": 6739.353458419579,
    "y": -16522.3229999087,
    "z": 435.8465653564781,
    "name": "Point315"
  },
  {
    "x": 6731.758434177007,
    "y": -16517.30860521706,
    "z": 435.6795990401879,
    "name": "Point316"
  },
  {
    "x": 6725.021768948101,
    "y": -16513.25086693471,
    "z": 434.9291187599301,
    "name": "Point317"
  },
  {
    "x": 6720.510536663182,
    "y": -16510.30623714663,
    "z": 434.349758438766,
    "name": "Point318"
  },
  {
    "x": 6723.958350779399,
    "y": -16505.4698909421,
    "z": 434.7708343155682,
    "name": "Point319"
  },
  {
    "x": 6728.625316937935,
    "y": -16508.86002827046,
    "z": 435.3354396037757,
    "name": "Point320"
  },
  {
    "x": 6727.635384384024,
    "y": -16501.39937809909,
    "z": 435.3715277630836,
    "name": "Point321"
  },
  {
    "x": 6731.890475864339,
    "y": -16504.39668065485,
    "z": 435.8470770502463,
    "name": "Point322"
  },
  {
    "x": 6738.4805404331,
    "y": -16505.66018441788,
    "z": 436.2999890400097,
    "name": "Point323"
  },
  {
    "x": 6739.748117330274,
    "y": -16514.66856396794,
    "z": 436.0148194879293,
    "name": "Point324"
  },
  {
    "x": 6743.830169320616,
    "y": -16514.2869994268,
    "z": 436.4563096659258,
    "name": "Point325"
  },
  {
    "x": 6749.728737402203,
    "y": -16517.83149225356,
    "z": 436.6090587861836,
    "name": "Point326"
  },
  {
    "x": 6754.756371820362,
    "y": -16522.32741221903,
    "z": 436.5357949957252,
    "name": "Point327"
  },
  {
    "x": 6758.949116470276,
    "y": -16526.12479281233,
    "z": 436.3858455494046,
    "name": "Point328"
  },
  {
    "x": 6764.289898426241,
    "y": -16530.6070463435,
    "z": 436.134811392054,
    "name": "Point329"
  },
  {
    "x": 6769.557712904023,
    "y": -16533.27996502252,
    "z": 435.7475922144949,
    "name": "Point330"
  },
  {
    "x": 6778.969858108077,
    "y": -16539.18294530314,
    "z": 435.5588450171053,
    "name": "Point331"
  },
  {
    "x": 6780.795660627183,
    "y": -16532.32811589617,
    "z": 436.1916942419484,
    "name": "Point332"
  },
  {
    "x": 6776.286574904146,
    "y": -16528.89366792406,
    "z": 436.4918140666559,
    "name": "Point333"
  },
  {
    "x": 6769.228740424555,
    "y": -16523.5769465905,
    "z": 437.0497208209708,
    "name": "Point334"
  },
  {
    "x": 6765.091365810978,
    "y": -16520.47062396446,
    "z": 437.3896025307477,
    "name": "Point335"
  },
  {
    "x": 6761.250514496476,
    "y": -16517.42193986779,
    "z": 437.4682648871094,
    "name": "Point336"
  },
  {
    "x": 6760.389805346051,
    "y": -16516.55850852474,
    "z": 437.2650102842599,
    "name": "Point337"
  },
  {
    "x": 6756.076313122549,
    "y": -16512.83458775452,
    "z": 437.4455889463425,
    "name": "Point338"
  },
  {
    "x": 6751.467894201356,
    "y": -16509.41965606465,
    "z": 437.3251932868734,
    "name": "Point339"
  },
  {
    "x": 6742.869383727459,
    "y": -16501.72352267911,
    "z": 436.5294048823416,
    "name": "Point340"
  },
  {
    "x": 6736.189398819053,
    "y": -16495.69278384053,
    "z": 436.1917070085183,
    "name": "Point341"
  },
  {
    "x": 6732.038606433562,
    "y": -16491.59621172594,
    "z": 435.7640758277848,
    "name": "Point342"
  },
  {
    "x": 6734.924457061614,
    "y": -16484.97846513367,
    "z": 436.265542961657,
    "name": "Point343"
  },
  {
    "x": 6739.674312421883,
    "y": -16488.77040850656,
    "z": 436.60329459887,
    "name": "Point344"
  },
  {
    "x": 6744.53907499684,
    "y": -16493.09923701784,
    "z": 436.9719384787604,
    "name": "Point345"
  },
  {
    "x": 6747.955684959876,
    "y": -16496.57666917509,
    "z": 437.1099768690765,
    "name": "Point346"
  },
  {
    "x": 6752.836965961978,
    "y": -16493.51580288126,
    "z": 437.5453114435077,
    "name": "Point347"
  },
  {
    "x": 6746.812818497492,
    "y": -16488.34624620163,
    "z": 437.1874585524201,
    "name": "Point348"
  },
  {
    "x": 6740.004717741138,
    "y": -16482.8217549163,
    "z": 436.8090521553531,
    "name": "Point349"
  },
  {
    "x": 6747.534039483819,
    "y": -16551.54015931885,
    "z": 434.6385581623763,
    "name": "Point350"
  },
  {
    "x": 6749.859626947868,
    "y": -16556.19330148785,
    "z": 434.0920226145536,
    "name": "Point351"
  },
  {
    "x": 6755.323086015903,
    "y": -16559.88506642127,
    "z": 433.4423333220184,
    "name": "Point352"
  },
  {
    "x": 6759.313939180377,
    "y": -16557.08892068954,
    "z": 433.8932217368856,
    "name": "Point353"
  },
  {
    "x": 6772.08437528569,
    "y": -16540.32678892344,
    "z": 434.7718493724242,
    "name": "Point354"
  },
  {
    "x": 6779.950522084569,
    "y": -16524.61152781135,
    "z": 437.0450206920505,
    "name": "Point355"
  },
  {
    "x": 6779.761614074897,
    "y": -16519.44810206628,
    "z": 437.7772276643664,
    "name": "Point356"
  },
  {
    "x": 6784.851297204214,
    "y": -16520.08840770322,
    "z": 437.8161772880703,
    "name": "Point357"
  },
  {
    "x": 6786.961760757308,
    "y": -16514.92111693234,
    "z": 438.4627755358815,
    "name": "Point358"
  },
  {
    "x": 6778.714880692769,
    "y": -16514.95448763238,
    "z": 438.2442538570613,
    "name": "Point359"
  },
  {
    "x": 6778.270009249576,
    "y": -16508.62935981286,
    "z": 438.8756410200149,
    "name": "Point360"
  },
  {
    "x": 6773.018759753893,
    "y": -16512.01710491319,
    "z": 438.3336827671155,
    "name": "Point361"
  },
  {
    "x": 6773.926380063353,
    "y": -16516.60680031202,
    "z": 437.6744392393157,
    "name": "Point362"
  },
  {
    "x": 6772.117204705433,
    "y": -16528.78426975141,
    "z": 436.2441609036177,
    "name": "Point363"
  },
  {
    "x": 6771.029801326251,
    "y": -16526.90901826564,
    "z": 436.5596435405314,
    "name": "Point364"
  },
  {
    "x": 6769.719014452238,
    "y": -16522.35787451274,
    "z": 437.1982690142468,
    "name": "Point365"
  },
  {
    "x": 6768.307942853609,
    "y": -16518.42469362678,
    "z": 437.6269130380824,
    "name": "Point366"
  },
  {
    "x": 6768.826677441888,
    "y": -16515.01415802606,
    "z": 437.6771128242835,
    "name": "Point367"
  },
  {
    "x": 6769.674253575331,
    "y": -16518.35599610531,
    "z": 437.2657341072336,
    "name": "Point368"
  },
  {
    "x": 6770.912565358758,
    "y": -16523.57571498789,
    "z": 436.7337644435465,
    "name": "Point369"
  },
  {
    "x": 6759.640629533711,
    "y": -16515.66982233187,
    "z": 437.2862656675279,
    "name": "Point370"
  },
  {
    "x": 6756.303137924911,
    "y": -16522.67018532878,
    "z": 436.5219649923965,
    "name": "Point371"
  },
  {
    "x": 6752.772836694958,
    "y": -16532.1397223839,
    "z": 435.6052981652319,
    "name": "Point372"
  },
  {
    "x": 6752.54291153562,
    "y": -16534.97533698772,
    "z": 435.4497263291851,
    "name": "Point373"
  },
  {
    "x": 6753.523237560523,
    "y": -16537.5557390365,
    "z": 435.2582830041647,
    "name": "Point374"
  },
  {
    "x": 6743.416118887229,
    "y": -16523.3154636068,
    "z": 435.8569834493101,
    "name": "Point375"
  },
  {
    "x": 6747.813729062751,
    "y": -16524.21356078454,
    "z": 435.9895637268201,
    "name": "Point376"
  },
  {
    "x": 6751.844306453222,
    "y": -16522.79393209852,
    "z": 436.2947039110586,
    "name": "Point377"
  },
  {
    "x": 6754.219228716196,
    "y": -16520.2385898622,
    "z": 436.6433339798823,
    "name": "Point378"
  },
  {
    "x": 6756.493698200587,
    "y": -16515.81554716347,
    "z": 437.1429927768186,
    "name": "Point379"
  },
  {
    "x": 6757.712564047345,
    "y": -16512.79694469732,
    "z": 437.4464145889506,
    "name": "Point380"
  },
  {
    "x": 6745.712064800893,
    "y": -16514.5683168968,
    "z": 436.6178324790671,
    "name": "Point381"
  },
  {
    "x": 6771.450563273197,
    "y": -16537.67938451953,
    "z": 435.2209719736129,
    "name": "Point382"
  },
  {
    "x": 6772.423962583265,
    "y": -16544.48576068778,
    "z": 434.5902957301587,
    "name": "Point383"
  },
  {
    "x": 6722.463775423425,
    "y": -16548.29452909404,
    "z": 433.9069830803201,
    "name": "Point384"
  },
  {
    "x": 6737.104599268738,
    "y": -16558.91753245796,
    "z": 433.5968930348754,
    "name": "Point385"
  },
  {
    "x": 6751.142961649472,
    "y": -16575.07148791849,
    "z": 430.9671135107055,
    "name": "Point386"
  },
  {
    "x": 6720.916388285741,
    "y": -16591.75144862356,
    "z": 430.1801182441413,
    "name": "Point387"
  },
  {
    "x": 6710.72284573069,
    "y": -16594.31900211224,
    "z": 429.8158630831167,
    "name": "Point388"
  },
  {
    "x": 6701.203266505704,
    "y": -16597.18536018277,
    "z": 429.5144863938913,
    "name": "Point389"
  },
  {
    "x": 6693.884671606906,
    "y": -16590.2655044955,
    "z": 430.0306412624195,
    "name": "Point390"
  },
  {
    "x": 6689.956780928049,
    "y": -16586.08429076107,
    "z": 430.1755576087162,
    "name": "Point391"
  },
  {
    "x": 6761.186990455808,
    "y": -16495.89663752484,
    "z": 438.757,
    "name": "Point393"
  },
  {
    "x": 6760.067839443529,
    "y": -16498.58122029098,
    "z": 438.484,
    "name": "Point394"
  },
  {
    "x": 6758.142827299131,
    "y": -16499.55748249652,
    "z": 438.075,
    "name": "Point395"
  },
  {
    "x": 6759.282629377563,
    "y": -16496.29235562272,
    "z": 438.114,
    "name": "Point396"
  },
  {
    "x": 6759.944471604163,
    "y": -16494.80867166257,
    "z": 438.2,
    "name": "Point397"
  },
  {
    "x": 6752.347920056012,
    "y": -16484.76285454813,
    "z": 437.848,
    "name": "Point399"
  },
  {
    "x": 6776.858689084807,
    "y": -16501.25303427556,
    "z": 440.336,
    "name": "Point400"
  },
  {
    "x": 6771.873211240907,
    "y": -16499.21276483407,
    "z": 440.172,
    "name": "Point401"
  },
  {
    "x": 6769.165187208164,
    "y": -16499.86363896672,
    "z": 439.754,
    "name": "Point402"
  },
  {
    "x": 6768.5516538144,
    "y": -16501.5926907426,
    "z": 439.239,
    "name": "Point403"
  },
  {
    "x": 6769.04741915454,
    "y": -16502.64015425266,
    "z": 439.213,
    "name": "Point404"
  },
  {
    "x": 6770.902593004765,
    "y": -16501.02244072081,
    "z": 439.552,
    "name": "Point405"
  },
  {
    "x": 6774.120764144165,
    "y": -16502.23378822929,
    "z": 439.528,
    "name": "Point406"
  },
  {
    "x": 6777.907009016975,
    "y": -16504.42074433726,
    "z": 439.329,
    "name": "Point407"
  },
  {
    "x": 6768.923324133895,
    "y": -16512.88184318724,
    "z": 437.966,
    "name": "Point408"
  },
  {
    "x": 6767.107587531525,
    "y": -16506.90869509679,
    "z": 438.727,
    "name": "Point409"
  },
  {
    "x": 6765.911825046083,
    "y": -16502.53522511516,
    "z": 438.893,
    "name": "Point410"
  },
  {
    "x": 6763.178103100545,
    "y": -16506.52250114864,
    "z": 438.336,
    "name": "Point411"
  },
  {
    "x": 6761.271790603134,
    "y": -16511.16669780941,
    "z": 437.769,
    "name": "Point412"
  },
  {
    "x": 6759.126712297475,
    "y": -16509.91905023759,
    "z": 437.783,
    "name": "Point413"
  },
  {
    "x": 6761.650644598212,
    "y": -16504.2557660859,
    "z": 438.431,
    "name": "Point414"
  },
  {
    "x": 6764.553240223686,
    "y": -16498.64325100723,
    "z": 439.193,
    "name": "Point415"
  },
  {
    "x": 6765.460583666751,
    "y": -16493.60804529059,
    "z": 439.822,
    "name": "Point416"
  },
  {
    "x": 6764.801351364681,
    "y": -16490.96478578897,
    "z": 439.983,
    "name": "Point417"
  },
  {
    "x": 6772.14833393256,
    "y": -16496.80667555013,
    "z": 440.16,
    "name": "Point418"
  },
  {
    "x": 6770.108186720185,
    "y": -16497.99873067364,
    "z": 439.93,
    "name": "Point419"
  },
  {
    "x": 6768.379891635128,
    "y": -16499.1401171575,
    "z": 439.53,
    "name": "Point420"
  },
  {
    "x": 6767.884994788234,
    "y": -16501.2717769945,
    "z": 439.193,
    "name": "Point421"
  },
  {
    "x": 6768.762736750135,
    "y": -16505.38491571737,
    "z": 438.972,
    "name": "Point422"
  },
  {
    "x": 6769.753620789625,
    "y": -16508.95498933778,
    "z": 438.558,
    "name": "Point423"
  },
  {
    "x": 6758.355696529907,
    "y": -16503.55073444655,
    "z": 438.047,
    "name": "Point424"
  },
  {
    "x": 6754.878062150901,
    "y": -16509.38414286644,
    "z": 437.577,
    "name": "Point425"
  },
  {
    "x": 6764.131170651233,
    "y": -16513.17009500741,
    "z": 438.147,
    "name": "Point426"
  },
  {
    "x": 6761.785091482405,
    "y": -16519.19126129,
    "z": 437.374,
    "name": "Point427"
  },
  {
    "x": 6772.827427358865,
    "y": -16518.48556171351,
    "z": 437.42,
    "name": "Point428"
  },
  {
    "x": 6772.283441543022,
    "y": -16508.65781616271,
    "z": 438.685,
    "name": "Point429"
  },
  {
    "x": 6773.900244946233,
    "y": -16505.08290760614,
    "z": 439.135,
    "name": "Point430"
  },
  {
    "x": 6764.912147020726,
    "y": -16509.43779769517,
    "z": 438.638,
    "name": "Point431"
  },
  {
    "x": 6784.789762510873,
    "y": -16507.47789638326,
    "z": 439.077,
    "name": "Point432"
  },
  {
    "x": 6765.696070457914,
    "y": -16528.85012383985,
    "z": 436.337,
    "name": "Point433"
  },
  {
    "x": 6779.234855079148,
    "y": -16541.98425952432,
    "z": 435.075,
    "name": "Point434"
  },
  {
    "x": 6754.539161652183,
    "y": -16554.941385687,
    "z": 434.04,
    "name": "Point435"
  },
  {
    "x": 6733.821194633379,
    "y": -16557.7216075885,
    "z": 433.543,
    "name": "Point436"
  },
  {
    "x": 6759.128528988987,
    "y": -16494.93016677752,
    "z": 438.167,
    "name": "Point439"
  },
  {
    "x": 6758.554577379064,
    "y": -16495.18745683778,
    "z": 438.176,
    "name": "Point440"
  },
  {
    "x": 6750.846550179847,
    "y": -16506.7712308943,
    "z": 437.371,
    "name": "Point442"
  },
  {
    "x": 6744.962339074793,
    "y": -16509.73459540262,
    "z": 436.914,
    "name": "Point443"
  },
  {
    "x": 6723.062945566957,
    "y": -16528.8191071637,
    "z": 435.093,
    "name": "Point444"
  },
  {
    "x": 6727.597849893025,
    "y": -16533.48107523628,
    "z": 435.081,
    "name": "Point445"
  },
  {
    "x": 6728.405944010194,
    "y": -16532.60014347953,
    "z": 435.114,
    "name": "Point446"
  },
  {
    "x": 6729.002845317658,
    "y": -16533.14769149491,
    "z": 435.087,
    "name": "Point447"
  }
] ;
let faces = []; // [[name1,name2,name3]]

const width = 900, height = 650, margin = 40;

let xExtent = d3.extent(points, d => d.x);
let yExtent = d3.extent(points, d => d.y);
let zExtent = d3.extent(points, d => d.z);

let xScale = d3.scaleLinear().domain(xExtent).nice().range([margin, width - margin]);
let yScale = d3.scaleLinear().domain(yExtent).nice().range([height - margin, margin]);
let colorScale = d3.scaleSequential(d3.interpolateViridis).domain(zExtent);

const svg = d3.select("#chart").append("svg").attr("width", width).attr("height", height);

const gAxes = svg.append('g');
const gAxisX = gAxes.append("g").attr("transform", `translate(0,${height - margin})`).attr("class", "axis");
const gAxisY = gAxes.append("g").attr("transform", `translate(${margin},0)`).attr("class", "axis");

const gPlot = svg.append('g');
const gTris = gPlot.append('g');
const gTemp = gPlot.append('g');
const gPoints = gPlot.append('g');
const gOverlay = gPlot.append('g');

let circles = gPoints.selectAll("circle.point").data(points.map((p,i)=>({...p,i}))).enter().append("circle")
  .attr("class","point")
  .attr("cx", d => xScale(d.x))
  .attr("cy", d => yScale(d.y))
  .attr("stroke","none");

circles.append("title").text(d => `${d.name}: Z=${d.z}`);

const tempLine = gTemp.append('path').attr('class','temp-edge').style('display','none');
const snapMarker = gOverlay.append('circle').attr('class','snap-marker').attr('r', 8).style('display','none');

let drawing = false;
let picked = [];
let zoomTransform = d3.zoomIdentity;

const statusEl = document.getElementById('status');
function setStatus(msg){ statusEl.textContent = msg; }

function baseScreenPos(pt){ return [ xScale(pt.x), yScale(pt.y) ]; }

function nearestPointIndex(mx, my){
  const localX = (mx - zoomTransform.x) / zoomTransform.k;
  const localY = (my - zoomTransform.y) / zoomTransform.k;
  let bestI=-1, bestD=Infinity;
  for(let i=0;i<points.length;i++){
    const [px,py] = baseScreenPos(points[i]);
    const dx=px-localX, dy=py-localY; const d2=dx*dx+dy*dy;
    if(d2<bestD){bestD=d2; bestI=i;}
  }
  return bestI;
}

function redrawAxes(){
  gAxisX.call(d3.axisBottom(zoomTransform.rescaleX(xScale)));
  gAxisY.call(d3.axisLeft(zoomTransform.rescaleY(yScale)));
}

function redrawPoints(){
  circles
    .attr('r', +radiusSlider.value)
    .attr('fill', d => colorScale(d.z))
    .attr('class', d => 'point' + (picked.includes(d.i) ? ' picked' : ''));
}

function triangleColor(names){
  const zs = names.map(n => points.find(p => p.name===n)?.z).filter(v=>v!=null);
  const avgZ = d3.mean(zs);
  return colorScale(avgZ);
}

function redrawTriangles(){
  const tris = gTris.selectAll('polygon').data(faces);
  tris.enter().append('polygon')
    .attr('class','tri')
    .merge(tris)
    .attr('points', names => names.map(n => baseScreenPos(points.find(p=>p.name===n))).join(' '))
    .attr('fill', names => triangleColor(names))
    .attr('fill-opacity',0.25);
  tris.exit().remove();
}

function beginTriangle(){ drawing=true; picked=[]; redrawPoints(); tempLine.style('display','block').attr('d',''); snapMarker.style('display','block'); setStatus('Zeichnen aktiv...'); }
function cancelTriangle(){ drawing=false; picked=[]; redrawPoints(); tempLine.style('display','none'); snapMarker.style('display','none'); setStatus('Abgebrochen.'); }
function commitTriangle(){
  if(picked.length===3){
    const names = picked.map(i => points[i].name);
    faces.push(names);
    redrawTriangles();
    setStatus(`Dreieck gespeichert: [${names.join(', ')}]. Insgesamt ${faces.length}.`);
    picked=[]; redrawPoints(); tempLine.attr('d','');
  }
}

svg.on('mousemove',(event)=>{
  const [mx,my]=d3.pointer(event);
  const i=nearestPointIndex(mx,my);
  if(i>=0){
    const [sx,sy]=baseScreenPos(points[i]);
    snapMarker.attr('cx',sx).attr('cy',sy);
    if(drawing){
      const pathPts=[...picked.map(idx=>baseScreenPos(points[idx])),[sx,sy]];
      tempLine.attr('d', pathPts.length>1?'M'+pathPts.map(p=>p.join(',')).join(' L '):'');
    }
  }
});

svg.on('click',(event)=>{
  if(!drawing) return;
  const [mx,my]=d3.pointer(event);
  const i=nearestPointIndex(mx,my);
  if(i<0) return;
  if(picked.includes(i)) return;
  picked.push(i); redrawPoints();
  if(picked.length===3) commitTriangle();
});

const zoom = d3.zoom().scaleExtent([0.5,20]).translateExtent([[0,0],[width,height]]).on('zoom',(event)=>{zoomTransform=event.transform; gPlot.attr('transform',zoomTransform); redrawAxes();});
svg.call(zoom);

const radiusSlider=document.getElementById("radiusSlider");
const colorSlider=document.getElementById("colorSlider");
const radiusVal=document.getElementById("radiusVal");
const colorVal=document.getElementById("colorVal");
function update(){
  const r=+radiusSlider.value, factor=+colorSlider.value;
  radiusVal.textContent=r; colorVal.textContent=factor;
  const zMid=(zExtent[0]+zExtent[1])/2, range=(zExtent[1]-zExtent[0])/factor;
  colorScale=d3.scaleSequential(d3.interpolateViridis).domain([zMid-range/2,zMid+range/2]);
  redrawPoints(); redrawTriangles();
}

radiusSlider.addEventListener('input',update);
colorSlider.addEventListener('input',update);

document.getElementById('btnNew').addEventListener('click',()=>{ if(!drawing) beginTriangle(); else { if(picked.length===3) commitTriangle(); else cancelTriangle(); }});

document.getElementById('btnCancel').addEventListener('click',cancelTriangle);

document.getElementById('btnSave').addEventListener('click',()=>{
  const out={ points:points.map(p=>({x:p.x,y:p.y,z:p.z,name:p.name})), faces:faces.map(f=>[...f]) };
  const blob=new Blob([JSON.stringify(out,null,2)],{type:'application/json'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a'); a.href=url; a.download='dreiecke.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
  setStatus(`Exportiert: ${faces.length} Dreieck(e).`);
});

const fileInput=document.getElementById('fileInput');
document.getElementById('btnImport').addEventListener('click',()=>fileInput.click());
fileInput.addEventListener('change',(e)=>{
  const file=e.target.files[0]; if(!file) return;
  const reader=new FileReader();
  reader.onload=(ev)=>{
    try{
      const data=JSON.parse(ev.target.result);
      if(!Array.isArray(data.points)) throw new Error('JSON benötigt points');
      points=data.points.map((p,i)=>({x:+p.x,y:+p.y,z:+p.z,name:p.name??`P${i}`}));
      faces=Array.isArray(data.faces)?data.faces.map(f=>f.map(n=>String(n))):[];

      xExtent=d3.extent(points,d=>d.x); yExtent=d3.extent(points,d=>d.y); zExtent=d3.extent(points,d=>d.z);
      xScale.domain(xExtent).nice(); yScale.domain(yExtent).nice();
      const factor=+colorSlider.value; const zMid=(zExtent[0]+zExtent[1])/2; const range=(zExtent[1]-zExtent[0])/factor;
      colorScale=d3.scaleSequential(d3.interpolateViridis).domain([zMid-range/2,zMid+range/2]);

      circles=gPoints.selectAll('circle.point').data(points.map((p,i)=>({...p,i})),d=>d.name);
      circles.exit().remove();
      const enter=circles.enter().append('circle').attr('class','point').attr('stroke','none');
      circles=enter.merge(circles);
      circles.attr('cx',d=>xScale(d.x)).attr('cy',d=>yScale(d.y)).attr('r',+radiusSlider.value).attr('fill',d=>colorScale(d.z));
      circles.select('title').remove(); circles.append('title').text(d=>`${d.name}: Z=${d.z}`);

      redrawTriangles(); redrawAxes();
      setStatus(`Import OK: ${points.length} Punkte, ${faces.length} Dreiecke.`);
    }catch(err){ console.error(err); setStatus('Import-Fehler: '+(err.message||String(err))); }
  };
  reader.readAsText(file);
});

redrawAxes(); update(); redrawTriangles(); setStatus('Bereit.');
// === STL-Export (nur Dreiecke per Namen) ===
function _normalOfTriangle_STL(a,b,c){
  const ux=b.x-a.x, uy=b.y-a.y, uz=b.z-a.z;
  const vx=c.x-a.x, vy=c.y-a.y, vz=c.z-a.z;
  let nx=uy*vz-uz*vy, ny=uz*vx-ux*vz, nz=ux*vy-uy*vx;
  const len=Math.hypot(nx,ny,nz)||1; return {x:nx/len,y:ny/len,z:nz/len};
}
function _trianglesToAsciiSTL(tris, name='mesh'){
  const out=[`solid ${name}`];
  for(const tri of tris){
    const n=_normalOfTriangle_STL(tri[0],tri[1],tri[2]);
    out.push(`  facet normal ${n.x} ${n.y} ${n.z}`);
    out.push(`    outer loop`);
    for(const p of tri){ out.push(`      vertex ${p.x} ${p.y} ${p.z}`); }
    out.push(`    endloop`);
    out.push(`  endfacet`);
  }
  out.push(`endsolid ${name}`);
return out.join('\\n');
}
function _downloadText_STL(filename, text){
  const blob=new Blob([text],{type:'application/sla; charset=utf-8'});
  const url=URL.createObjectURL(blob);
  const a=document.createElement('a'); a.href=url; a.download=filename; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
}

const _btnExportSTL = document.getElementById('btnExportSTL');
if(_btnExportSTL){
  _btnExportSTL.addEventListener('click',()=>{
    const nameMap=buildNameMap();
    const tris=[]; let skipped=0;
    for(const f of faces){
      const a=nameMap.get(String(f[0]));
      const b=nameMap.get(String(f[1]));
      const c=nameMap.get(String(f[2]));
      if(a&&b&&c){ tris.push([{x:+a.x,y:+a.y,z:+a.z},{x:+b.x,y:+b.y,z:+b.z},{x:+c.x,y:+c.y,z:+c.z}]); } else { skipped++; }
    }
    if(!tris.length){ setStatus('Keine gültigen Dreiecke für STL.'); return; }
    const stl=_trianglesToAsciiSTL(tris,'dreiecke');
    _downloadText_STL('dreiecke.stl', stl);
    setStatus(`STL exportiert: ${tris.length} Facets${skipped?` (übersprungen: ${skipped})`:''}.`);
  });
}
// Fallback: buildNameMap definieren, falls nicht vorhanden
if (typeof buildNameMap === 'undefined') {
  function buildNameMap(){
    const m = new Map();
    for (const p of points) m.set(String(p.name), p);
    return m;
  }
}
</script>

</body>
</html>
